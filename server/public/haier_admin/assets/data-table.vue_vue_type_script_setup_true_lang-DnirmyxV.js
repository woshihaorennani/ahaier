import{D as B,B as P,C as R,i as T,L as D,M as L,K as U}from"./element-plus-CWv4vAYp.js";import{d as F,s as M,a0 as N,r as S,w as z,c as b,o as g,U as e,L as o,M as I,a as $,u as a,a9 as h,R as C,i as j,H}from"./@vue-ygbFPFRc.js";import{f as q,h as A}from"./code-Bbwqmq27.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-CNmR3XG4.js";import{P as J}from"./index-DmOr95pa.js";import{u as O}from"./usePaging-B2jDzebD.js";import{f as Q}from"./index-jO8IIJDP.js";const W={class:"data-table"},X={class:"m-4"},Y={class:"flex justify-end mt-4"},me=F({__name:"data-table",emits:["success"],setup(Z,{emit:v}){const w=v,u=M(),s=N({name:"",comment:""}),{pager:n,getLists:f,resetParams:y,resetPage:d}=O({fetchFun:q,params:s,size:10}),c=S([]),V=l=>{c.value=l.map(({name:t,comment:i})=>({name:t,comment:i}))},k=async()=>{var l;if(!c.value.length)return Q.msgError("请选择数据表");await A({table:c.value}),(l=u.value)==null||l.close(),w("success")};return z(()=>{var l;return(l=u.value)==null?void 0:l.visible},l=>{l&&f()}),(l,t)=>{const i=R,p=P,_=T,E=B,r=L,x=D,K=U;return g(),b("div",W,[e(J,{ref_key:"popupRef",ref:u,clickModalClose:!1,title:"选择表",width:"900px",async:!0,onConfirm:k},{trigger:o(()=>[H(l.$slots,"default")]),default:o(()=>[e(E,{class:"ls-form",model:a(s),inline:""},{default:o(()=>[e(p,{class:"w-[280px]",label:"表名称"},{default:o(()=>[e(i,{modelValue:a(s).name,"onUpdate:modelValue":t[0]||(t[0]=m=>a(s).name=m),clearable:"",onKeyup:h(a(d),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,{class:"w-[280px]",label:"表描述"},{default:o(()=>[e(i,{modelValue:a(s).comment,"onUpdate:modelValue":t[1]||(t[1]=m=>a(s).comment=m),clearable:"",onKeyup:h(a(d),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,null,{default:o(()=>[e(_,{type:"primary",onClick:a(d)},{default:o(()=>t[3]||(t[3]=[C("查询")])),_:1},8,["onClick"]),e(_,{onClick:a(y)},{default:o(()=>t[4]||(t[4]=[C("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),I((g(),b("div",X,[e(x,{height:"400",size:"large",data:a(n).lists,onSelectionChange:V},{default:o(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"表名称",prop:"name","min-width":"150"}),e(r,{label:"表描述",prop:"comment","min-width":"160"}),e(r,{label:"创建时间",prop:"create_time","min-width":"180"})]),_:1},8,["data"])])),[[K,a(n).loading]]),$("div",Y,[e(G,{modelValue:a(n),"onUpdate:modelValue":t[2]||(t[2]=m=>j(n)?n.value=m:null),onChange:a(f)},null,8,["modelValue","onChange"])])]),_:3},512)])}}});export{me as _};
