import{D as h,B as k,C,h as R,g as S}from"./element-plus-CWv4vAYp.js";import{P as F}from"./index-BCfIGGFe.js";import{b as U,a as B,c as I}from"./operator-Mg6DQJA-.js";import{f as N}from"./index-D2Q83sa5.js";import{d as P,s as d,r as q,b as A,a0 as L,c as T,o as j,U as s,L as l}from"./@vue-ygbFPFRc.js";const z={class:"edit-popup"},W=P({__name:"edit",emits:["success","close"],setup(G,{expose:f,emit:_}){const i=_,p=d(),m=d(),u=q("add"),v=A(()=>u.value=="edit"?"编辑业务范畴":"新增业务范畴"),t=L({id:"",name:"",sort:0,status:1}),b={name:[{required:!0,message:"请输入业务范畴名称",trigger:"blur"}]},w=async()=>{var e,n;await((e=p.value)==null?void 0:e.validate());const o={...t};u.value=="edit"?await U(o):(delete o.id,await B(o)),(n=m.value)==null||n.close(),N.msgSuccess("操作成功"),i("success")},V=()=>{i("close")},g=(o="add")=>{var e;u.value=o,(e=m.value)==null||e.open(),x()},c=async o=>{for(const e in t)o[e]!=null&&o[e]!=null&&(t[e]=o[e])},x=()=>{t.id="",t.name="",t.sort=0,t.status=1};return f({open:g,setFormData:c,getDetail:async o=>{const e=await I({id:o.id});c(e)}}),(o,e)=>{const n=C,r=k,y=R,D=S,E=h;return j(),T("div",z,[s(F,{ref_key:"popupRef",ref:m,title:v.value,async:!0,width:"500px",onConfirm:w,onClose:V},{default:l(()=>[s(E,{ref_key:"formRef",ref:p,model:t,"label-width":"100px",rules:b},{default:l(()=>[s(r,{label:"名称",prop:"name"},{default:l(()=>[s(n,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.name=a),placeholder:"请输入业务范畴名称"},null,8,["modelValue"])]),_:1}),s(r,{label:"排序",prop:"sort"},{default:l(()=>[s(y,{modelValue:t.sort,"onUpdate:modelValue":e[1]||(e[1]=a=>t.sort=a),min:0,max:9999},null,8,["modelValue"])]),_:1}),s(r,{label:"状态",prop:"status"},{default:l(()=>[s(D,{modelValue:t.status,"onUpdate:modelValue":e[2]||(e[2]=a=>t.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{W as _};
