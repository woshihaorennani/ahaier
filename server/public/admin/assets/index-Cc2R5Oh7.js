import{D as G,B as H,C as J,O as Q,P as W,i as X,I as Y,K as Z,L as ee,M as te,q as oe,g as ae}from"./element-plus-CWv4vAYp.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-CNmR3XG4.js";import{b as ne,f as ie}from"./index-CHG46-C0.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-Cd7jd6FO.js";import{d as P,s as me,a0 as re,r as pe,l as de,at as ue,c as E,o as s,U as e,M as b,K as r,P as k,L as l,u as a,a9 as x,T as ce,ab as _e,R as u,a as D,i as fe,n as $}from"./@vue-ygbFPFRc.js";import{a as K,_ as be,b as ve,c as we}from"./edit.vue_vue_type_script_setup_true_lang-CCz9KnCL.js";import{r as ge}from"./role-D9tsTAdd.js";import{u as he}from"./useDictOptions-CwmqGtW2.js";import{u as ye}from"./usePaging-B2jDzebD.js";import"./@element-plus-DLVfkjJV.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-Bj3Na0hr.js";/* empty css                                                              */import"./picker-CerHzkoO.js";import"./index-DBwFVGdn.js";import"./index-Ca_SErPT.js";/* empty css                                                              */import"./index-T-Ao3Ixb.js";import"./index.vue_vue_type_script_setup_true_lang-ORwxP_0u.js";/* empty css                                                              */import"./vuedraggable-RHgmLr3o.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";/* empty css                                                               */import"./department-gLj9YIhS.js";import"./post-CtUObbCJ.js";const ke={class:"admin"},Ce={class:"mt-4"},Ve={class:"flex mt-4 justify-end"},Ee=P({name:"admin"}),Et=P({...Ee,setup(xe){const v=me(),m=re({account:"",name:"",role_id:""}),w=pe(!1),{pager:p,getLists:c,resetParams:U,resetPage:y}=ye({fetchFun:K,params:m}),B=n=>{ve({id:n.id,avatar:n.avatar,account:n.account,name:n.name,role_id:n.role_id,job_id:n.job_id,dept_id:n.dept_id,disable:n.disable,multipoint_login:n.multipoint_login}).finally(()=>{c()})},L=async()=>{var n;w.value=!0,await $(),(n=v.value)==null||n.open("add")},z=async n=>{var t,_;w.value=!0,await $(),(t=v.value)==null||t.open("edit"),(_=v.value)==null||_.setFormData(n)},F=async n=>{await ie.confirm("确定要删除？"),await we({id:n}),c()},{optionsData:I}=he({role:{api:ge}});return de(()=>{c()}),(n,t)=>{const _=J,g=H,C=W,R=Q,f=X,S=se,T=G,V=Y,N=ne,i=te,j=oe,A=ae,M=ee,O=le,h=ue("perms"),q=Z;return s(),E("div",ke,[e(V,{class:"!border-none",shadow:"never"},{default:l(()=>[e(T,{class:"mb-[-16px]",model:a(m),inline:""},{default:l(()=>[e(g,{class:"w-[280px]",label:"管理员账号"},{default:l(()=>[e(_,{modelValue:a(m).account,"onUpdate:modelValue":t[0]||(t[0]=o=>a(m).account=o),placeholder:"请输入管理员账号",clearable:"",onKeyup:x(a(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{class:"w-[280px]",label:"管理员名称"},{default:l(()=>[e(_,{modelValue:a(m).name,"onUpdate:modelValue":t[1]||(t[1]=o=>a(m).name=o),placeholder:"请输入管理员名称",clearable:"",onKeyup:x(a(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{class:"w-[280px]",label:"管理员角色"},{default:l(()=>[e(R,{modelValue:a(m).role_id,"onUpdate:modelValue":t[2]||(t[2]=o=>a(m).role_id=o)},{default:l(()=>[e(C,{label:"全部",value:""}),(s(!0),E(ce,null,_e(a(I).role,(o,d)=>(s(),r(C,{key:d,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:l(()=>[e(f,{type:"primary",onClick:a(y)},{default:l(()=>t[5]||(t[5]=[u("查询")])),_:1},8,["onClick"]),e(f,{onClick:a(U)},{default:l(()=>t[6]||(t[6]=[u("重置")])),_:1},8,["onClick"]),e(S,{class:"ml-2.5","fetch-fun":a(K),params:a(m),"page-size":a(p).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),b((s(),r(V,{class:"mt-4 !border-none",shadow:"never"},{default:l(()=>[b((s(),r(f,{type:"primary",onClick:L},{icon:l(()=>[e(N,{name:"el-icon-Plus"})]),default:l(()=>[t[7]||(t[7]=u(" 新增 "))]),_:1})),[[h,["auth.admin/add"]]]),D("div",Ce,[e(M,{data:a(p).lists,size:"large"},{default:l(()=>[e(i,{label:"ID",prop:"id","min-width":"60"}),t[10]||(t[10]=u("> ")),e(i,{label:"头像","min-width":"100"},{default:l(({row:o})=>[e(j,{size:50,src:o.avatar},null,8,["src"])]),_:1}),e(i,{label:"账号",prop:"account","min-width":"100"}),e(i,{label:"名称",prop:"name","min-width":"100"}),e(i,{label:"角色",prop:"role_name","min-width":"100","show-tooltip-when-overflow":""}),e(i,{label:"部门",prop:"dept_name","min-width":"100","show-tooltip-when-overflow":""}),e(i,{label:"创建时间",prop:"create_time","min-width":"180"}),e(i,{label:"最近登录时间",prop:"login_time","min-width":"180"}),e(i,{label:"最近登录IP",prop:"login_ip","min-width":"120"}),b((s(),r(i,{label:"状态","min-width":"100"},{default:l(({row:o})=>[o.root!=1?(s(),r(A,{key:0,modelValue:o.disable,"onUpdate:modelValue":d=>o.disable=d,"active-value":0,"inactive-value":1,onChange:d=>B(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])):k("",!0)]),_:1})),[[h,["auth.admin/edit"]]]),e(i,{label:"操作",width:"120",fixed:"right"},{default:l(({row:o})=>[b((s(),r(f,{type:"primary",link:"",onClick:d=>z(o)},{default:l(()=>t[8]||(t[8]=[u(" 编辑 ")])),_:2},1032,["onClick"])),[[h,["auth.admin/edit"]]]),o.root!=1?b((s(),r(f,{key:0,type:"danger",link:"",onClick:d=>F(o.id)},{default:l(()=>t[9]||(t[9]=[u(" 删除 ")])),_:2},1032,["onClick"])),[[h,["auth.admin/delete"]]]):k("",!0)]),_:1})]),_:1},8,["data"])]),D("div",Ve,[e(O,{modelValue:a(p),"onUpdate:modelValue":t[3]||(t[3]=o=>fe(p)?p.value=o:null),onChange:a(c)},null,8,["modelValue","onChange"])])]),_:1})),[[q,a(p).loading]]),a(w)?(s(),r(be,{key:0,ref_key:"editRef",ref:v,onSuccess:a(c),onClose:t[4]||(t[4]=o=>w.value=!1)},null,8,["onSuccess"])):k("",!0)])}}});export{Et as default};
