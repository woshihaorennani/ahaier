import{D,B,C as Y,Y as N,h as F,i as I,Q as M,E as R}from"./element-plus-CWv4vAYp.js";import{l as j,a as A,b as K}from"./marketing-7rMMbVer.js";/* empty css                                                              */import"./index-CHG46-C0.js";import"./lodash-CMKdTQec.js";/* empty css                                                              *//* empty css                                                              */import"./vuedraggable-RHgmLr3o.js";/* empty css                                                               */import{d as L,r as i,a0 as V,K as O,o as P,L as t,U as a,a as f,R as c}from"./@vue-ygbFPFRc.js";const Q={class:"flex items-center"},S={class:"dialog-footer"},le=L({__name:"edit",emits:["success"],setup(T,{expose:g,emit:v}){const x=v,u=i(!1),d=i("add"),p=i(!1),m=i(),l=V({id:"",name:"",dates:"",min:0,max:0,bonuses_pool:0,number_all:0,can_win:1,special:0,special_number:0}),w=V({name:[{required:!0,message:"请输入奖品名称",trigger:"blur"}],dates:[{required:!0,message:"请选择日期",trigger:"change"}],min:[{required:!0,message:"请输入最小区间",trigger:"blur"}],max:[{required:!0,message:"请输入最大区间",trigger:"blur"}],bonuses_pool:[{required:!0,message:"请输入奖金池",trigger:"blur"}],number_all:[{required:!0,message:"请输入发放数量",trigger:"blur"}],can_win:[{required:!0,message:"请输入可中奖次数",trigger:"blur"}]}),U=async(r,e)=>{if(d.value=r,u.value=!0,r=="edit"&&e){const _=await j({id:e});Object.assign(l,_)}},y=()=>{m.value&&(m.value.resetFields(),l.id="",l.name="",l.dates="",l.min=0,l.max=0,l.bonuses_pool=0,l.number_all=0,l.special=0)},E=async()=>{var r;await((r=m.value)==null?void 0:r.validate()),p.value=!0;try{d.value=="add"?await A(l):await K(l),R.success("操作成功"),u.value=!1,x("success")}finally{p.value=!1}};return g({open:U}),(r,e)=>{const _=Y,n=B,k=N,s=F,q=D,b=I,C=M;return P(),O(C,{modelValue:u.value,"onUpdate:modelValue":e[10]||(e[10]=o=>u.value=o),title:d.value=="add"?"新增奖品":"编辑奖品",width:"500px","close-on-click-modal":!1,onClosed:y},{footer:t(()=>[f("div",S,[a(b,{onClick:e[9]||(e[9]=o=>u.value=!1)},{default:t(()=>e[12]||(e[12]=[c("取消")])),_:1}),a(b,{type:"primary",onClick:E,loading:p.value},{default:t(()=>e[13]||(e[13]=[c("确定")])),_:1},8,["loading"])])]),default:t(()=>[a(q,{ref_key:"formRef",ref:m,model:l,rules:w,"label-width":"100px"},{default:t(()=>[a(n,{label:"奖品名称",prop:"name"},{default:t(()=>[a(_,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.name=o),placeholder:"请输入奖品名称"},null,8,["modelValue"])]),_:1}),a(n,{label:"日期",prop:"dates"},{default:t(()=>[a(k,{modelValue:l.dates,"onUpdate:modelValue":e[1]||(e[1]=o=>l.dates=o),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期",class:"w-full"},null,8,["modelValue"])]),_:1}),a(n,{label:"特等奖金额",prop:"special"},{default:t(()=>[a(s,{modelValue:l.special,"onUpdate:modelValue":e[2]||(e[2]=o=>l.special=o),min:0,precision:2},null,8,["modelValue"])]),_:1}),a(n,{label:"特等奖数量",prop:"special_number"},{default:t(()=>[a(s,{modelValue:l.special_number,"onUpdate:modelValue":e[3]||(e[3]=o=>l.special_number=o),min:0,precision:0},null,8,["modelValue"])]),_:1}),a(n,{label:"中奖区间",required:""},{default:t(()=>[f("div",Q,[a(n,{prop:"min"},{default:t(()=>[a(s,{modelValue:l.min,"onUpdate:modelValue":e[4]||(e[4]=o=>l.min=o),min:0,precision:2,placeholder:"最小值"},null,8,["modelValue"])]),_:1}),e[11]||(e[11]=f("span",{class:"mx-2"},"-",-1)),a(n,{prop:"max"},{default:t(()=>[a(s,{modelValue:l.max,"onUpdate:modelValue":e[5]||(e[5]=o=>l.max=o),min:0,precision:2,placeholder:"最大值"},null,8,["modelValue"])]),_:1})])]),_:1}),a(n,{label:"奖金池",prop:"bonuses_pool"},{default:t(()=>[a(s,{modelValue:l.bonuses_pool,"onUpdate:modelValue":e[6]||(e[6]=o=>l.bonuses_pool=o),min:0,precision:2},null,8,["modelValue"])]),_:1}),a(n,{label:"发放数量",prop:"number_all"},{default:t(()=>[a(s,{modelValue:l.number_all,"onUpdate:modelValue":e[7]||(e[7]=o=>l.number_all=o),min:0,precision:0},null,8,["modelValue"])]),_:1}),a(n,{label:"可中奖次数",prop:"can_win"},{default:t(()=>[a(s,{modelValue:l.can_win,"onUpdate:modelValue":e[8]||(e[8]=o=>l.can_win=o),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{le as _};
