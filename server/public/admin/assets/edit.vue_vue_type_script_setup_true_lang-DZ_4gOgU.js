import{D as I,B as L,C as P,$ as N,O as T,P as z,h as A,g as K}from"./element-plus-CWv4vAYp.js";import{P as $}from"./index-Cq_tVji0.js";import{d as j,o as G,g as H,h as J}from"./operator-D501myZ_.js";import{s as M}from"./element-china-area-data-CYTyhV3z.js";import{f as Q}from"./index-Buq94rDi.js";import{u as W}from"./useDictOptions-D4RrIPid.js";import{d as X,s as b,r as Y,b as V,a0 as Z,c as v,o as i,U as t,L as r,u as g,T as ee,ab as le,K as oe}from"./@vue-ygbFPFRc.js";const ae={class:"edit-popup"},ce=X({__name:"edit",emits:["success","close"],setup(te,{expose:y,emit:w}){const m=w,c=b(),p=b(),d=Y("add"),D=V(()=>d.value=="edit"?"编辑运营商":"新增运营商"),{optionsData:E}=W({operator_scope:{api:j,params:{page_no:1,page_size:100,status:1},transformData(o){return o.lists.map(l=>({name:l.name,value:l.name}))}}}),e=Z({id:"",name:"",contact:"",phone:"",email:"",province:"",city:"",district:"",address:"",scope:"",sort:0,status:1}),U={name:[{required:!0,message:"请输入运营商名称",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},h=M.map(o=>{var l;return{value:o.label,label:o.label,children:(l=o.children)==null?void 0:l.map(s=>{var n;return{value:s.label,label:s.label,children:(n=s.children)==null?void 0:n.map(u=>({value:u.label,label:u.label}))}})}}),f=V({get(){return e.province&&e.city&&e.district?[e.province,e.city,e.district]:[]},set(o){o&&o.length===3?(e.province=o[0],e.city=o[1],e.district=o[2]):(e.province="",e.city="",e.district="")}}),k=async()=>{var l,s;await((l=c.value)==null?void 0:l.validate());const o={...e};d.value=="edit"?await G(o):(delete o.id,await H(o)),(s=p.value)==null||s.close(),Q.msgSuccess("操作成功"),m("success")},x=()=>{m("close")},C=(o="add")=>{var l;d.value=o,(l=p.value)==null||l.open(),R()},_=async o=>{for(const l in e)o[l]!=null&&o[l]!=null&&(e[l]=o[l])},R=()=>{e.id="",e.name="",e.contact="",e.phone="",e.email="",e.province="",e.city="",e.district="",e.address="",e.scope="",e.sort=0,e.status=1};return y({open:C,setFormData:_,getDetail:async o=>{const l=await J({id:o.id});_(l)}}),(o,l)=>{const s=P,n=L,u=N,F=z,S=T,q=A,B=K,O=I;return i(),v("div",ae,[t($,{ref_key:"popupRef",ref:p,title:D.value,async:!0,width:"600px",onConfirm:k,onClose:x},{default:r(()=>[t(O,{ref_key:"formRef",ref:c,model:e,"label-width":"100px",rules:U},{default:r(()=>[t(n,{label:"运营商名称",prop:"name"},{default:r(()=>[t(s,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=a=>e.name=a),placeholder:"请输入运营商名称"},null,8,["modelValue"])]),_:1}),t(n,{label:"联系人",prop:"contact"},{default:r(()=>[t(s,{modelValue:e.contact,"onUpdate:modelValue":l[1]||(l[1]=a=>e.contact=a),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),t(n,{label:"联系电话",prop:"phone"},{default:r(()=>[t(s,{modelValue:e.phone,"onUpdate:modelValue":l[2]||(l[2]=a=>e.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),t(n,{label:"邮箱",prop:"email"},{default:r(()=>[t(s,{modelValue:e.email,"onUpdate:modelValue":l[3]||(l[3]=a=>e.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),t(n,{label:"所在地区",required:""},{default:r(()=>[t(u,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=a=>f.value=a),options:g(h),placeholder:"请选择所在地区",class:"w-full"},null,8,["modelValue","options"])]),_:1}),t(n,{label:"公司地址",prop:"address"},{default:r(()=>[t(s,{modelValue:e.address,"onUpdate:modelValue":l[5]||(l[5]=a=>e.address=a),placeholder:"请输入公司地址",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(n,{label:"业务范畴",prop:"scope"},{default:r(()=>[t(S,{modelValue:e.scope,"onUpdate:modelValue":l[6]||(l[6]=a=>e.scope=a),placeholder:"请选择业务范畴",class:"w-full",filterable:"",clearable:""},{default:r(()=>[(i(!0),v(ee,null,le(g(E).operator_scope,a=>(i(),oe(F,{key:a.value,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"排序",prop:"sort"},{default:r(()=>[t(q,{modelValue:e.sort,"onUpdate:modelValue":l[7]||(l[7]=a=>e.sort=a),min:0,max:9999},null,8,["modelValue"])]),_:1}),t(n,{label:"状态",prop:"status"},{default:r(()=>[t(B,{modelValue:e.status,"onUpdate:modelValue":l[8]||(l[8]=a=>e.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ce as _};
