import{D as A,B as j,C as G,O as H,P as J,i as Q,I as W,L as X,M as Y,_ as Z,K as ee}from"./element-plus-CWv4vAYp.js";import{b as te,f as ae}from"./index-D5PRheP7.js";import{d as F,s as g,r as x,a0 as oe,l as le,n as V,at as ne,c as se,o as d,U as t,K as f,P as h,L as a,u as s,a9 as ie,R as i,a as re,M as v,S as pe}from"./@vue-ygbFPFRc.js";import{e as de,f as me}from"./department-0eu3Sq7j.js";import{_ as ue}from"./edit.vue_vue_type_script_setup_true_lang-BBxfxTPf.js";import"./@element-plus-DLVfkjJV.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-B4LyNnjE.js";/* empty css                                                              */import"./useDictOptions-Cc__uWyh.js";const fe={class:"department"},ce=F({name:"department"}),Ye=F({...ce,setup(_e){const R=g(),c=g(),D=g();let b=!1;const w=x(!1),C=x([]),m=oe({status:"",name:""}),y=x(!1),u=async()=>{w.value=!0,C.value=await de(m),w.value=!1},K=()=>{var o;(o=D.value)==null||o.resetFields(),u()},$=async o=>{var e,n;y.value=!0,await V(),o&&((e=c.value)==null||e.setFormData({pid:o})),(n=c.value)==null||n.open("add")},N=async o=>{var e,n;y.value=!0,await V(),(e=c.value)==null||e.open("edit"),(n=c.value)==null||n.getDetail(o)},S=async o=>{await ae.confirm("确定要删除？"),await me({id:o}),u()},B=()=>{b=!b,L(C.value,b)},L=(o,e=!0)=>{var n;for(const r in o)(n=R.value)==null||n.toggleRowExpansion(o[r],e),o[r].children&&L(o[r].children,e)};return le(async()=>{await u(),V(()=>{B()})}),(o,e)=>{const n=G,r=j,E=J,I=H,p=Q,M=A,P=W,U=te,_=Y,O=Z,q=X,k=ne("perms"),z=ee;return d(),se("div",fe,[t(P,{class:"!border-none",shadow:"never"},{default:a(()=>[t(M,{ref_key:"formRef",ref:D,class:"mb-[-16px]",model:s(m),inline:!0},{default:a(()=>[t(r,{class:"w-[280px]",label:"部门名称",prop:"name"},{default:a(()=>[t(n,{modelValue:s(m).name,"onUpdate:modelValue":e[0]||(e[0]=l=>s(m).name=l),placeholder:"输入部门名称",clearable:"",onKeyup:ie(u,["enter"])},null,8,["modelValue"])]),_:1}),t(r,{class:"w-[280px]",label:"部门状态",prop:"status"},{default:a(()=>[t(I,{modelValue:s(m).status,"onUpdate:modelValue":e[1]||(e[1]=l=>s(m).status=l)},{default:a(()=>[t(E,{label:"全部",value:""}),t(E,{label:"正常",value:"1"}),t(E,{label:"停用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:a(()=>[t(p,{type:"primary",onClick:u},{default:a(()=>e[4]||(e[4]=[i("查询")])),_:1}),t(p,{onClick:K},{default:a(()=>e[5]||(e[5]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(P,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[re("div",null,[v((d(),f(p,{type:"primary",onClick:e[2]||(e[2]=l=>$())},{icon:a(()=>[t(U,{name:"el-icon-Plus"})]),default:a(()=>[e[6]||(e[6]=i(" 新增 "))]),_:1})),[[k,["dept.dept/add"]]]),t(p,{onClick:B},{default:a(()=>e[7]||(e[7]=[i(" 展开/折叠 ")])),_:1})]),v((d(),f(q,{ref_key:"tableRef",ref:R,class:"mt-4",size:"large",data:s(C),"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:a(()=>[t(_,{label:"部门名称",prop:"name","min-width":"150","show-overflow-tooltip":""}),t(_,{label:"部门状态",prop:"status","min-width":"100"},{default:a(({row:l})=>[t(O,{class:"ml-2",type:l.status?"primary":"danger"},{default:a(()=>[i(pe(l.status_desc),1)]),_:2},1032,["type"])]),_:1}),t(_,{label:"排序",prop:"sort","min-width":"100"}),t(_,{label:"更新时间",prop:"update_time","min-width":"180"}),t(_,{label:"操作",width:"160",fixed:"right"},{default:a(({row:l})=>[v((d(),f(p,{type:"primary",link:"",onClick:T=>$(l.id)},{default:a(()=>e[8]||(e[8]=[i(" 新增 ")])),_:2},1032,["onClick"])),[[k,["dept.dept/add"]]]),v((d(),f(p,{type:"primary",link:"",onClick:T=>N(l)},{default:a(()=>e[9]||(e[9]=[i(" 编辑 ")])),_:2},1032,["onClick"])),[[k,["dept.dept/edit"]]]),l.pid!==0?v((d(),f(p,{key:0,type:"danger",link:"",onClick:T=>S(l.id)},{default:a(()=>e[10]||(e[10]=[i(" 删除 ")])),_:2},1032,["onClick"])),[[k,["dept.dept/delete"]]]):h("",!0)]),_:1})]),_:1},8,["data"])),[[z,s(w)]])]),_:1}),s(y)?(d(),f(ue,{key:0,ref_key:"editRef",ref:c,onSuccess:u,onClose:e[3]||(e[3]=l=>y.value=!1)},null,512)):h("",!0)])}}});export{Ye as default};
