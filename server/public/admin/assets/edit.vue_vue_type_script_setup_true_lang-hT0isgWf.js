import{D,B,C as Y,Y as N,h as F,i as I,Q as M,E as R}from"./element-plus-CWv4vAYp.js";import{l as j,a as A,b as K}from"./marketing-z1OGPQCx.js";/* empty css                                                              */import"./index-D5PRheP7.js";import"./lodash-CMKdTQec.js";/* empty css                                                              *//* empty css                                                              */import"./vuedraggable-RHgmLr3o.js";/* empty css                                                               */import{d as L,r as i,a0 as g,K as O,o as P,L as t,U as a,a as _,R as V}from"./@vue-ygbFPFRc.js";const Q={class:"flex items-center"},S={class:"dialog-footer"},le=L({__name:"edit",emits:["success"],setup(T,{expose:c,emit:v}){const x=v,u=i(!1),d=i("add"),p=i(!1),m=i(),l=g({id:"",name:"",dates:"",min:0,max:0,bonuses_pool:0,number_all:0,can_win:1,special:0}),w=g({name:[{required:!0,message:"请输入奖品名称",trigger:"blur"}],dates:[{required:!0,message:"请选择日期",trigger:"change"}],min:[{required:!0,message:"请输入最小区间",trigger:"blur"}],max:[{required:!0,message:"请输入最大区间",trigger:"blur"}],bonuses_pool:[{required:!0,message:"请输入奖金池",trigger:"blur"}],number_all:[{required:!0,message:"请输入发放数量",trigger:"blur"}],can_win:[{required:!0,message:"请输入可中奖次数",trigger:"blur"}]}),y=async(n,e)=>{if(d.value=n,u.value=!0,n=="edit"&&e){const f=await j({id:e});Object.assign(l,f)}},E=()=>{m.value&&(m.value.resetFields(),l.id="",l.name="",l.dates="",l.min=0,l.max=0,l.bonuses_pool=0,l.number_all=0,l.special=0)},U=async()=>{var n;await((n=m.value)==null?void 0:n.validate()),p.value=!0;try{d.value=="add"?await A(l):await K(l),R.success("操作成功"),u.value=!1,x("success")}finally{p.value=!1}};return c({open:y}),(n,e)=>{const f=Y,s=B,k=N,r=F,q=D,b=I,C=M;return P(),O(C,{modelValue:u.value,"onUpdate:modelValue":e[9]||(e[9]=o=>u.value=o),title:d.value=="add"?"新增奖品":"编辑奖品",width:"500px","close-on-click-modal":!1,onClosed:E},{footer:t(()=>[_("div",S,[a(b,{onClick:e[8]||(e[8]=o=>u.value=!1)},{default:t(()=>e[11]||(e[11]=[V("取消")])),_:1}),a(b,{type:"primary",onClick:U,loading:p.value},{default:t(()=>e[12]||(e[12]=[V("确定")])),_:1},8,["loading"])])]),default:t(()=>[a(q,{ref_key:"formRef",ref:m,model:l,rules:w,"label-width":"100px"},{default:t(()=>[a(s,{label:"奖品名称",prop:"name"},{default:t(()=>[a(f,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.name=o),placeholder:"请输入奖品名称"},null,8,["modelValue"])]),_:1}),a(s,{label:"日期",prop:"dates"},{default:t(()=>[a(k,{modelValue:l.dates,"onUpdate:modelValue":e[1]||(e[1]=o=>l.dates=o),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期",class:"w-full"},null,8,["modelValue"])]),_:1}),a(s,{label:"特等奖",prop:"special"},{default:t(()=>[a(r,{modelValue:l.special,"onUpdate:modelValue":e[2]||(e[2]=o=>l.special=o),min:0,precision:0},null,8,["modelValue"])]),_:1}),a(s,{label:"中奖区间",required:""},{default:t(()=>[_("div",Q,[a(s,{prop:"min"},{default:t(()=>[a(r,{modelValue:l.min,"onUpdate:modelValue":e[3]||(e[3]=o=>l.min=o),min:0,precision:2,placeholder:"最小值"},null,8,["modelValue"])]),_:1}),e[10]||(e[10]=_("span",{class:"mx-2"},"-",-1)),a(s,{prop:"max"},{default:t(()=>[a(r,{modelValue:l.max,"onUpdate:modelValue":e[4]||(e[4]=o=>l.max=o),min:0,precision:2,placeholder:"最大值"},null,8,["modelValue"])]),_:1})])]),_:1}),a(s,{label:"奖金池",prop:"bonuses_pool"},{default:t(()=>[a(r,{modelValue:l.bonuses_pool,"onUpdate:modelValue":e[5]||(e[5]=o=>l.bonuses_pool=o),min:0,precision:2},null,8,["modelValue"])]),_:1}),a(s,{label:"发放数量",prop:"number_all"},{default:t(()=>[a(r,{modelValue:l.number_all,"onUpdate:modelValue":e[6]||(e[6]=o=>l.number_all=o),min:0,precision:0},null,8,["modelValue"])]),_:1}),a(s,{label:"可中奖次数",prop:"can_win"},{default:t(()=>[a(r,{modelValue:l.can_win,"onUpdate:modelValue":e[7]||(e[7]=o=>l.can_win=o),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{le as _};
