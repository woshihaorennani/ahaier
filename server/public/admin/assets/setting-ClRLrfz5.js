import{_ as y}from"./index-BMAQptev.js";import{D as k,B as I,C as x,I as B,i as C}from"./element-plus-CWv4vAYp.js";import{_ as S}from"./picker-DI_9hDdu.js";import{a as F,f as l,F as M}from"./index-BomcVx8-.js";import{d as f,r as N,a0 as _,c as R,o as q,U as e,L as a,u as s,a as d,R as D}from"./@vue-ygbFPFRc.js";import"./@element-plus-DLVfkjJV.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-BfyldbO0.js";/* empty css                                                              */import"./index-CNs2nhUh.js";import"./index.vue_vue_type_script_setup_true_lang-CNmR3XG4.js";import"./index-BzdKW3Je.js";/* empty css                                                              */import"./index-RFluUL_e.js";import"./index.vue_vue_type_script_setup_true_lang-ORwxP_0u.js";import"./@vueuse-yz9uDhpq.js";/* empty css                                                              */import"./usePaging-B2jDzebD.js";import"./vuedraggable-RHgmLr3o.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";/* empty css                                                               */import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const L={class:"user-setting"},T={class:"w-80"},j={class:"w-80"},z={class:"w-80"},A={class:"w-80"},G={class:"w-80"},H=f({name:"userSetting"}),jo=f({...H,setup(J){const i=N(),u=F(),o=_({avatar:"",account:"",name:"",password_old:"",password:"",password_confirm:""}),c=_({avatar:[{required:!0,message:"头像不能为空",trigger:["change"]}],name:[{required:!0,message:"请输入名称",trigger:["blur"]}]}),w=async()=>{const m=u.userInfo;for(const r in o)o[r]=m[r]},g=async()=>{if(o.password_old||o.password||o.password_confirm){if(!o.password_old)return l.msgError("请输入当前密码");if(!o.password)return l.msgError("请输入新的密码");if(!o.password_confirm)return l.msgError("请输入确定密码");if(o.password_confirm!=o.password)return l.msgError("两次输入的密码不一样")}if(o.password_old&&o.password&&o.password_confirm){if(o.password_old.length<6||o.password_old.length>32)return l.msgError("密码长度在6到32之间");if(o.password.length<6||o.password.length>32)return l.msgError("密码长度在6到32之间");if(o.password_confirm.length<6||o.password_confirm.length>32)return l.msgError("密码长度在6到32之间")}await M(o),u.getUserInfo()},V=async()=>{var m;await((m=i.value)==null?void 0:m.validate()),g()};return w(),(m,r)=>{const v=S,p=I,n=x,b=k,E=B,U=C,h=y;return q(),R("div",L,[e(E,{class:"!border-none",shadow:"never"},{default:a(()=>[e(b,{ref_key:"formRef",ref:i,class:"ls-form",model:s(o),rules:s(c),"label-width":"100px"},{default:a(()=>[e(p,{label:"头像：",prop:"avatar"},{default:a(()=>[e(v,{modelValue:s(o).avatar,"onUpdate:modelValue":r[0]||(r[0]=t=>s(o).avatar=t),limit:1},null,8,["modelValue"])]),_:1}),e(p,{label:"账号：",prop:"account"},{default:a(()=>[d("div",T,[e(n,{modelValue:s(o).account,"onUpdate:modelValue":r[1]||(r[1]=t=>s(o).account=t),disabled:""},null,8,["modelValue"])])]),_:1}),e(p,{label:"名称：",prop:"name"},{default:a(()=>[d("div",j,[e(n,{modelValue:s(o).name,"onUpdate:modelValue":r[2]||(r[2]=t=>s(o).name=t),placeholder:"请输入名称"},null,8,["modelValue"])])]),_:1}),e(p,{label:"当前密码：",prop:"password_old"},{default:a(()=>[d("div",z,[e(n,{modelValue:s(o).password_old,"onUpdate:modelValue":r[3]||(r[3]=t=>s(o).password_old=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),e(p,{label:"新的密码：",prop:"password"},{default:a(()=>[d("div",A,[e(n,{modelValue:s(o).password,"onUpdate:modelValue":r[4]||(r[4]=t=>s(o).password=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),e(p,{label:"确定密码：",prop:"password_confirm"},{default:a(()=>[d("div",G,[e(n,{modelValue:s(o).password_confirm,"onUpdate:modelValue":r[5]||(r[5]=t=>s(o).password_confirm=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(h,null,{default:a(()=>[e(U,{type:"primary",onClick:V},{default:a(()=>r[6]||(r[6]=[D("保存")])),_:1})]),_:1})])}}});export{jo as default};
